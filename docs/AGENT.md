# Cognivern Agent System

## Mission & Vision

**Mission Statement**: "Showcase best-in-class AI governance for decentralized prediction markets, building trust in autonomous forecasting agents."

### Core Value Propositions

1.  **Trust & Transparency**: On-chain verifiable forecasts via Ethereum Attestation Service (EAS).
2.  **Autonomous Forecasting**: 24/7 market analysis and probability estimation.
3.  **Policy Enforcement**: Automated compliance with risk management rules.
4.  **DeFi Integration**: Direct interaction with Sapience and Ethereal protocols.

## Overview

Cognivern is a specialized forecasting agent built for the **Sapience Prediction Market Protocol**. Unlike traditional black-box trading bots, Cognivern emphasizes **verifiable governance**. Every forecast generated by the agent is cryptographically signed and attested on-chain (Arbitrum One), creating an immutable record of the agent's thought process and probability estimates.

## Agent Capabilities

-   **Probabilistic Forecasting**: Analyzes market questions and assigns probability estimates (0-100%).
-   **On-Chain Attestation**: Publishes forecasts to the Arbitrum blockchain using EAS.
-   **Automated Trading**: Executes positions in prediction markets on the Ethereal network.
-   **Governance Compliance**: Validates actions against internal policy rules before execution.

## Agent Structure

### Core Components

-   **SapienceService**: The bridge to the blockchain. Handles EAS attestations and Ethereal contract interactions.
-   **GovernanceAgent**: The "brain" of the system. Manages the decision loop, generates thoughts, and maintains the context window.
-   **AgentsModule**: A modular wrapper that orchestrates the agent's lifecycle within the application.

### Decision Flow

1.  **Market Analysis**: The agent identifies an active market on the Sapience protocol.
2.  **Forecast Generation**: Based on available data, the agent calculates a probability (e.g., "75% chance ETH > $3000").
3.  **Policy Check**: The internal governance engine checks if the action allows for this trade size and risk level.
4.  **Attestation**: If approved, the forecast is submitted to Arbitrum via `SapienceService.submitForecast`.
5.  **Execution**: The agent may optionally take a financial position on Ethereal via `SapienceService.executeTrade`.

## Forecasting Agent

### ðŸ¤– Agent Architecture

```typescript
class SapienceTradingAgent {
  // Configuration
  private readonly config: TradingAgentConfig;
  private readonly sapienceService: SapienceService;

  // Autonomous execution
  async executeTrade(decision: TradingDecision): Promise<TradeResult> {
    // 1. Check governance compliance
    const compliance = await this.checkCompliance(decision);
    if (!compliance.isCompliant) return { status: 'failed', ... };

    // 2. Submit forecast to Sapience (EAS Attestation)
    const txHash = await this.sapienceService.submitForecast({
      marketId: decision.symbol,
      probability: decision.confidence,
      reasoning: decision.reasoning
    });

    // 3. Log result
    return { status: 'executed', id: txHash, ... };
  }
}
```

### ðŸ“Š Performance Tracking

The agent's performance is tracked through:
-   **Brier Score**: Accuracy of probabilistic forecasts over time.
-   **PnL**: Profit and loss from trading positions on Ethereal.
-   **Attestation History**: Verifiable on-chain log of all predictions.

## Security Features

-   **Private Key Management**: Keys are stored in secure environment variables, never exposed in code.
-   **RPC Security**: Communication with Arbitrum and Ethereal nodes occurs over HTTPS.
-   **Policy Guardrails**: Hard-coded limits on trade size and frequency prevent runaway bot behavior.